(()=>{var y=class{colors={base:["rgba(7, 9, 115, 1.0)","rgba(18, 63, 119, 1.0)","rgba(24, 47, 92, 1.0)","rgba(40, 89, 156, 1.0)","rgba(32, 72, 156, 1.0)","rgba(21, 52, 121, 1.0)"],midtones:["rgba(30, 64, 88, 1.0)","rgba(77, 115, 143, 1.0)","rgba(66, 122, 161, 1.0)","rgba(72, 136, 200, 1.0)"],highlights:["rgba(236, 204, 44, 1.0)","rgba(191, 253, 200, 1.0)","rgba(98, 23, 228, 1.0)"],windCurl:["rgba(255, 255, 255, 1.0)","rgba(81, 173, 224, 1.0)","rgba(122, 201, 224, 1.0)","rgba(119, 148, 204, 1.0)"],starCurl:["rgba(250, 145, 0, 1.0)","rgba(246, 247, 177, 1.0)"]};getRandomColor(){let t=Math.random();return t<.7?this._pickRandom(this.colors.base):t<.9?this._pickRandom(this.colors.midtones):this._pickRandom(this.colors.highlights)}get windCurl(){return this._pickRandom(this.colors.windCurl)}get starCurl(){let t=this._toRgbArray(this.colors.starCurl[0]),i=this._toRgbArray(this.colors.starCurl[1]);return{inner:t,outer:i}}_pickRandom(t){return t[Math.floor(Math.random()*t.length)]}_toRgbArray(t){return t.match(/\d+/g).slice(0,3).map(Number)}};var x=class{maxLength=Math.floor(Math.random()*21)+10;minTime=20;maxTime=80;timer=Math.floor(Math.random()*(this.maxTime-this.minTime+1))+this.minTime;speed=4;palette=new y;originalColor=this.palette.getRandomColor();currentColor=this.originalColor;changeCounter=1;constructor(t,i,e,r){this.effect=t,this.context=t.context,this.startingX=i,this.startingY=e,this.x=this.startingX,this.y=this.startingY,this.history=[{x:this.x,y:this.y}],this.maxParticleWidth=this._getParticleWidth(r),this.originalParticleWidth=Math.floor(Math.random()*this.maxParticleWidth)+1,this.particleWidth=this.originalParticleWidth}draw(t=this.context){if(this.history.length<2)return;t.save(),t.lineCap="round",t.lineJoin="round",t.lineWidth=this.particleWidth;let i=this.currentColor;t.strokeStyle=i,t.beginPath(),t.moveTo(this.history[0].x,this.history[0].y);for(let e=1;e<this.history.length;e++)t.lineTo(this.history[e].x,this.history[e].y);t.stroke(),t.restore()}reset(){this.x=this.startingX,this.y=this.startingY,this.history=[{x:this.x,y:this.y}],this.particleWidth=this.originalParticleWidth,this.timer=Math.floor(Math.random()*(this.maxTime-this.minTime+1))+this.minTime}update(){this.timer--,this.timer>=1?(this._updatePosition(),this._updateColor(),this.history.push({x:this.x,y:this.y}),this.history.length>this.maxLength&&this.history.shift()):this.history.length>1?this.history.shift():this.reset()}_updatePosition(){let t=Math.floor(this.x/this.effect.cellSize),e=Math.floor(this.y/this.effect.cellSize)*this.effect.cols+t,r=this.effect.flowField[e];if(r){let s={x:r.x,y:r.y},o=Math.hypot(s.x,s.y);this.currentForceMag=o,o>0&&(s.x/=o,s.y/=o);let c=this.effect.flowStrength??1;s.x*=c,s.y*=c;let n=this.effect.maxStrength??2,l=Math.hypot(s.x,s.y);l>n&&(s.x=s.x/l*n,s.y=s.y/l*n),this.x+=s.x*this.speed,this.y+=s.y*this.speed}}_updateColor(){let t=!1;for(let i of this.effect.curlPoints){let e=i.x*this.effect.width,r=i.y*this.effect.height,s=Math.hypot(this.x-e,this.y-r);if(s<=i.radius){if(i.isStar){let[o,c,n]=this.palette.starCurl.inner,[l,a,f]=this.palette.starCurl.outer;if(s<=i.innerRadius)this.currentColor=`rgba(${o}, ${c}, ${n}, 1.0)`;else{let d=1-(s-i.innerRadius)/(i.radius-i.innerRadius),g=l+(o-l)*d,u=a+(c-a)*d,m=f+(n-f)*d;this.currentColor=`rgba(${Math.round(g)}, ${Math.round(u)}, ${Math.round(m)}, 1.0)`}}else this.changeCounter&&Math.random()<.7&&(this.currentColor=this.palette.windCurl),this.changeCounter=0;t=!0;break}}t||(this.currentColor=this.originalColor,this.changeCounter=1)}_getParticleWidth(t){return t>=900?4:t>=600?3:2}};var p=class{constructor(t,i,e){this.effect=t,this.waveAmplitude=t.waveAmplitude,this.waveFrequency=t.waveFrequency,this.x=i,this.y=e}calculateVector(){let{cellSize:t,width:i,height:e,curlPoints:r,flowStrength:s}=this.effect,o=this.x*t+t/2,c=this.y*t+t/2,n={x:0,y:0};for(let a of r){let f=a.x*i,d=a.y*e,g=Math.hypot(o-f,c-d),u=0;if(g<a.innerRadius)u=1;else if(g<a.radius){let m=(g-a.innerRadius)/(a.radius-a.innerRadius);u=Math.pow(1-m,a.falloffExponent)}if(u>0){let m=o-f,M=c-d,S=this.createPerpendicularVector(m,M,a.rotateClockwise);n.x+=S.x*a.curlScale*u,n.y+=S.y*a.curlScale*u}}let l={x:s,y:-Math.sin(o*this.waveFrequency)*this.waveAmplitude};return{x:l.x+n.x,y:l.y+n.y}}createPerpendicularVector(t,i,e){return e?{x:-i,y:t}:{x:i,y:-t}}};var C=class{flowField=[];cellSize=5;waveAmplitude=.1;waveFrequency=.01;particles=[];jitter=2;flowStrength=.15;maxStrength=2;constructor(t,i,e){this.canvas=t.canvas,this.context=t,this.height=e,this.width=i,this.rows=Math.ceil(this.height/this.cellSize),this.cols=Math.ceil(this.width/this.cellSize),this.particleCount=this._setParticlesCount(this.width),this.animationFrameId=null,this.trailCanvas=document.createElement("canvas"),this.trailCanvas.width=i,this.trailCanvas.height=e,this.trailCtx=this.trailCanvas.getContext("2d"),this.lastFrameTime=0,this.targetFPS=30,this.curlPoints=[{x:.1,y:.2,innerRadius:10,radius:80,falloffExponent:4,curlScale:.9,rotateClockwise:!0,isStar:!0},{x:.25,y:.1,innerRadius:20,radius:40,falloffExponent:4,curlScale:.9,rotateClockwise:!0,isStar:!0},{x:.12,y:.6,innerRadius:20,radius:50,falloffExponent:4,curlScale:.9,rotateClockwise:!0,isStar:!0},{x:.55,y:.2,innerRadius:10,radius:90,falloffExponent:4,curlScale:.9,rotateClockwise:!0,isStar:!0},{x:.65,y:.43,innerRadius:10,radius:50,falloffExponent:4,curlScale:.9,rotateClockwise:!0,isStar:!0},{x:.85,y:.3,innerRadius:80,radius:125,falloffExponent:4,curlScale:.9,rotateClockwise:!1,isStar:!0},{x:.75,y:.8,innerRadius:10,radius:80,falloffExponent:4,curlScale:.9,rotateClockwise:!1,isStar:!0},{x:.35,y:.5,innerRadius:10,radius:220,falloffExponent:4,curlScale:.5,rotateClockwise:!0,isStar:!1},{x:.5,y:.75,innerRadius:10,radius:130,falloffExponent:3,curlScale:.5,rotateClockwise:!1,isStar:!1}]}init(){this.generateParticles(),this.generateVectorField()}generateParticles(){this.particles=[];let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)t.push({x:r,y:e});for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}let i=this.cellSize*this.jitter;for(let e=0;e<this.particleCount&&e<t.length;e++){let r=t[e],s=r.x*this.cellSize+Math.random()*i,o=r.y*this.cellSize+Math.random()*i;this.particles.push(new x(this,s,o,this.width))}}generateVectorField(){this.flowField=[];for(let t=0;t<this.rows;t++)for(let i=0;i<this.cols;i++){let r=new p(this,i,t).calculateVector();this.flowField.push(r)}}render(t=0){if(t-this.lastFrameTime<1e3/this.targetFPS){this.animationFrameId=requestAnimationFrame(this.render.bind(this));return}this.lastFrameTime=t,this.trailCtx.globalAlpha=.15,this.trailCtx.fillStyle="#000",this.trailCtx.fillRect(0,0,this.trailCanvas.width,this.trailCanvas.height),this.trailCtx.globalAlpha=1,this.particles.forEach(i=>{i.draw(this.trailCtx),i.update()}),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.trailCanvas,0,0),this.animationFrameId=requestAnimationFrame(this.render.bind(this))}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}_setParticlesCount(t){return t>=1400?3e3:t>=1e3?2500:t>=600?2e3:1500}};var w,b;function v(h){w&&w.stop();let t=h.canvas,i=window.innerWidth,e=window.innerHeight;t.width=i,t.height=e,w=new C(h,i,e),w.init(),w.render()}var R=h=>{clearTimeout(b),b=setTimeout(()=>{v(h)},250)};window.onload=async function(){let t=document.querySelector("canvas").getContext("2d");v(t),window.addEventListener("resize",()=>{R(t)})};})();
